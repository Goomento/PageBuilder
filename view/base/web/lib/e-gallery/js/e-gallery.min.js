var EGallery=function(t){var e={};function i(n){if(e[n])return e[n].exports;var r=e[n]={i:n,l:!1,exports:{}};return t[n].call(r.exports,r,r.exports,i),r.l=!0,r.exports}return i.m=t,i.c=e,i.d=function(t,e,n){i.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},i.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},i.t=function(t,e){if(1&e&&(t=i(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(i.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var r in t)i.d(n,r,function(e){return t[e]}.bind(null,r));return n},i.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return i.d(e,"a",e),e},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.p="",i(i.s=9)}([function(t,e){t.exports=function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}},function(t,e){function i(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}t.exports=function(t,e,n){return e&&i(t.prototype,e),n&&i(t,n),t}},function(t,e,i){var n=i(5),r=i(6);t.exports=function(t,e){return!e||"object"!==n(e)&&"function"!=typeof e?r(t):e}},function(t,e){function i(e){return t.exports=i=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},i(e)}t.exports=i},function(t,e,i){var n=i(7);t.exports=function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&n(t,e)}},function(t,e){function i(t){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function n(t){return(n="function"==typeof Symbol&&"symbol"===i(Symbol.iterator)?function(t){return i(t)}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":i(t)})(t)}function r(e){return"function"==typeof Symbol&&"symbol"===n(Symbol.iterator)?t.exports=r=function(t){return n(t)}:t.exports=r=function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":n(t)},r(e)}t.exports=r},function(t,e){t.exports=function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}},function(t,e){function i(e,n){return t.exports=i=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t},i(e,n)}t.exports=i},function(t,e,i){},function(t,e,i){"use strict";i.r(e);var n=i(0),r=i.n(n),s=i(1),a=i.n(s),o=i(2),u=i.n(o),l=i(3),c=i.n(l),h=i(4),y=i.n(h),f=function(){function t(e){r()(this,t),this.settings=jQuery.extend(!0,this.getDefaultSettings(),e),this.$container=jQuery(this.settings.container),this.runGallery=this.debounce(this.runGallery.bind(this),300),this.initElements(),this.prepareGallery(),this.bindEvents()}return a()(t,[{key:"getDefaultSettings",value:function(){return{}}},{key:"getItemClass",value:function(t){return this.settings.classesPrefix+t}},{key:"initElements",value:function(){this.elements={$window:jQuery(window)},this.$container.addClass(this.getItemClass(this.settings.classes.container)+" "+this.getItemClass(this.settings.type))}},{key:"bindEvents",value:function(){this.elements.$window.on("resize",this.runGallery)}},{key:"getNestedObjectData",value:function(t,e){var i=e.split("."),n=i.splice(0,1);return i.length?this.getNestedObjectData(t[n],i.join(".")):{object:t,key:e}}},{key:"getTemplateArgs",value:function(t,e){var i=this.getNestedObjectData(t,e);return i.object[i.key]||""}},{key:"getCurrentBreakpoint",value:function(){var t=Object.keys(this.settings.breakpoints).map(Number).sort((function(t,e){return t-e})),e=0;return t.some((function(t){return innerWidth<t&&(e=t,!0)})),e}},{key:"getCurrentDeviceSetting",value:function(t){var e=this.getCurrentBreakpoint();return e?this.settings.breakpoints[e][t]:this.settings[t]}},{key:"getActiveItems",value:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],e=this.settings.tags,i=[];if(!e.length)return this.$items;var n=this.$items.filter((function(n,r){var s=r.dataset.eGalleryTags;return!!s&&(s=s.split(/[ ,]+/),!!e.some((function(t){return s.includes(t)}))&&(t&&i.push(n),!0))}));return t?i:n}},{key:"getActiveImagesData",value:function(t){if(this.settings.tags.length){var e=this.getActiveItems(!0)[t];return this.imagesData[e]}return this.imagesData[t]}},{key:"compileTemplate",value:function(t,e){var i=this;return t.replace(/{{([^}]+)}}/g,(function(t,n){return i.getTemplateArgs(e,n.trim())}))}},{key:"createOverlay",value:function(t){var e=this.settings,i=e.classes,n=e.overlayTemplate,r=jQuery("<div>",{class:this.getItemClass(i.overlay)}),s=this.compileTemplate(n,jQuery.extend(!0,this.settings,t));return r.html(s),r}},{key:"createItem",value:function(t){var e,i=this.settings.classes,n=jQuery("<div>",{class:this.getItemClass(i.item),"data-e-gallery-tags":t.tags}),r=jQuery("<div>",{class:this.getItemClass(i.image)}).css("background-image","url("+t.thumbnail+")");this.settings.overlay&&(e=this.createOverlay(t));var s=n;return t.url&&(s=jQuery("<a>",{class:this.getItemClass(i.link),href:t.url}),n.html(s)),s.html(r),e&&s.append(e),n}},{key:"debounce",value:function(t,e){var i;return function(){for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];var a=this,o=function(){i=null,t.apply(a,r)};clearTimeout(i),i=setTimeout(o,e)}}},{key:"buildGallery",value:function(){var t=this,e=this.settings.items;this.$items=jQuery(),e.forEach((function(e){var i=t.createItem(e);t.$items=t.$items.add(i),t.$container.append(i)}))}},{key:"calculateImageSize",value:function(t,e){this.imagesData[e]={width:t.width,height:t.height,ratio:t.width/t.height}}},{key:"loadImages",value:function(){var t=this,e=[];this.imagesData=[],this.settings.items&&(this.settings.items.forEach((function(i,n){var r=new Image,s=new Promise((function(t){r.onload=t}));e.push(s),s.then((function(){return new Promise((function(e){t.calculateImageSize(r,n),e()}))})),r.src=i.thumbnail})),Promise.all(e).then((function(){return t.runGallery()})))}},{key:"makeGalleryFromContent",value:function(){var t=this.settings.selectors,e=[];this.$items=this.$container.find(t.items),this.$items.length&&(this.$items.each((function(i,n){var r=jQuery(n).find(t.image),s=r.data("thumbnail");r.css("background-image",'url("'.concat(s,'")')),e[i]={thumbnail:s}})),this.settings.items=e)}},{key:"prepareGallery",value:function(){this.settings.items?this.buildGallery():this.makeGalleryFromContent(),this.loadImages()}},{key:"runGallery",value:function(t){if(this.settings.items){var e=this.$container[0].style;e.setProperty("--hgap",this.getCurrentDeviceSetting("horizontalGap")+"px"),e.setProperty("--vgap",this.getCurrentDeviceSetting("verticalGap")+"px"),e.setProperty("--animation-duration",this.settings.animationDuration+"ms"),this.$items.addClass("gallery-item--hidden"),this.getActiveItems().removeClass("gallery-item--hidden"),this.run(t)}}},{key:"setSettings",value:function(t,e){var i=this.getNestedObjectData(this.settings,t);i.object&&(i.object[i.key]=e,this.runGallery(!0))}},{key:"unbindEvents",value:function(){this.elements.$window.off("resize",this.runGallery)}},{key:"destroy",value:function(){this.unbindEvents(),this.$container.empty()}}]),t}(),g=function(t){function e(){return r()(this,e),u()(this,c()(e).apply(this,arguments))}return y()(e,t),a()(e,[{key:"getDefaultSettings",value:function(){return{aspectRatio:"16:9"}}},{key:"setItemsPosition",value:function(){var t=this.getCurrentDeviceSetting("columns");this.getActiveItems().each((function(e,i){i.style.setProperty("--column",e%t),i.style.setProperty("--row",Math.floor(e/t))}))}},{key:"setContainerSize",value:function(){var t=this.getCurrentDeviceSetting("columns"),e=Math.ceil(this.getActiveItems().length/t),i=this.$container[0].style;i.setProperty("--columns",t),i.setProperty("--rows",e);var n=this.getActiveItems().width(),r=this.settings.aspectRatio.split(":"),s=r[1]/r[0],a=(s*n*e+this.getCurrentDeviceSetting("horizontalGap")*(e-1))/this.$container.width()*100;i.setProperty("--aspect-ratio",100*s+"%"),i.setProperty("--container-aspect-ratio",a+"%")}},{key:"run",value:function(){var t=this,e=this.getItemClass(this.settings.classes.animated);this.$container.addClass(e),setTimeout((function(){t.setContainerSize(),t.setItemsPosition(),setTimeout((function(){return t.$container.removeClass(e)}),t.settings.animationDuration)}),50)}}]),e}(f),m=function(t){function e(){return r()(this,e),u()(this,c()(e).apply(this,arguments))}return y()(e,t),a()(e,[{key:"getDefaultSettings",value:function(){return{idealRowHeight:200,lastRow:"auto",breakpoints:{1024:{idealRowHeight:150},768:{idealRowHeight:100}}}}},{key:"run",value:function(){this.rowsHeights=[],this.rowsCount=0,this.containerWidth=this.$container.width(),this.makeJustifiedRow(0)}},{key:"makeJustifiedRow",value:function(t){for(var e=0,i=t;;i++){var n=this.getActiveImagesData(i);if(void 0===n)break;var r=Math.round(this.getCurrentDeviceSetting("idealRowHeight")*n.ratio);r>this.containerWidth&&(r=this.containerWidth);var s=e+r;if(s>this.containerWidth)if(this.containerWidth-e<s-this.containerWidth){this.fitImagesInContainer(t,i,e),this.rowsCount++,this.makeJustifiedRow(i);break}var a=i===this.getActiveItems().length-1;if(n.computedWidth=r,a){var o=this.getCurrentDeviceSetting("lastRow");if("hide"!==o){var u="fit"===o||.7<=s/this.containerWidth?s:this.containerWidth;this.fitImagesInContainer(t,i+1,u)}this.inflateGalleryHeight();break}e=s}}},{key:"fitImagesInContainer",value:function(t,e,i){for(var n=e-t-1,r=this.getActiveItems(),s=0,a=t;a<e;a++){var o=this.getActiveImagesData(a);if(void 0===o)break;var u=o.computedWidth/i,l=r.get(a),c=this.getItemClass(this.settings.classes.firstRowItem);if(l.style.setProperty("--item-width",u),l.style.setProperty("--gap-count",n),l.style.setProperty("--item-height",o.height/o.width*100+"%"),l.style.setProperty("--item-left",s),l.style.setProperty("--item-row-index",a-t),s+=u,a===t){l.classList.add(c);var h=u*(this.containerWidth-n*this.getCurrentDeviceSetting("horizontalGap"));this.rowsHeights.push(h/o.ratio)}else l.classList.remove(c)}}},{key:"inflateGalleryHeight",value:function(){var t=this.rowsHeights.reduce((function(t,e){return t+e}))+this.rowsCount*this.getCurrentDeviceSetting("verticalGap"),e=t/this.containerWidth,i=this.rowsHeights.map((function(e){return e/t*100})),n=-1,r=0;this.getActiveItems().each((function(t,e){"0"===e.style.getPropertyValue("--item-row-index")&&++n&&(r+=i[n-1]),e.style.setProperty("--item-top",r+"%"),e.style.setProperty("--item-height",i[n]+"%"),e.style.setProperty("--row",n)})),this.$container[0].style.setProperty("--container-aspect-ratio",e)}}]),e}(f),p=function(t){function e(){return r()(this,e),u()(this,c()(e).apply(this,arguments))}return y()(e,t),a()(e,[{key:"run",value:function(t){var e=this,i=this.getCurrentBreakpoint();if(t||i!==this.currentBreakpoint){this.currentBreakpoint=i;var n=[],r=[],s=this.getCurrentDeviceSetting("columns"),a=this.$container.width(),o=(a-this.getCurrentDeviceSetting("horizontalGap")*(s-1))/s,u=this.getActiveItems();if(u){u.each((function(t,i){var a=Math.floor(t/s),u=t%s,l=e.getActiveImagesData(t);if(void 0!==l){var c=o/l.ratio;i.style.setProperty("--item-height",l.height/l.width*100+"%"),i.style.setProperty("--column",u),a?(r[t]=n[u],n[u]+=c):n.push(c)}}));var l=Math.max.apply(Math,n),c=n.indexOf(l),h=Math.floor(this.settings.items.length/s),y=this.settings.items.length%s>c?h:h-1,f=l/a;this.$container[0].style.setProperty("--columns",s),this.$container[0].style.setProperty("--highest-column-gap-count",y),this.$container.css("padding-bottom",100*f+"%"),u.each((function(t,e){var i=r[t]?r[t]/l*100:0,n=Math.floor(t/s);e.style.setProperty("--percent-height",i+"%"),e.style.setProperty("--row",n)}))}}}}]),e}(f);i(8);i.d(e,"default",(function(){return v}));var v=function(){function t(e){r()(this,t),this.userSettings=e,this.initGalleriesTypes(),this.createGallery()}return a()(t,[{key:"getDefaultSettings",value:function(){return{container:null,items:null,type:"grid",tags:[],overlay:!1,overlayTemplate:'<div class="{{ classesPrefix }}{{ classes.overlayTitle }}">{{ title }}</div><div class="{{ classesPrefix }}{{ classes.overlayDescription }}">{{ description }}</div>',columns:5,horizontalGap:10,verticalGap:10,animationDuration:350,classesPrefix:"e-gallery-",classes:{container:"container",item:"item",image:"image",overlay:"overlay",overlayTitle:"overlay__title",overlayDescription:"overlay__description",link:"link",firstRowItem:"first-row-item",animated:"-animated"},selectors:{items:".e-gallery-item",image:".e-gallery-image"},breakpoints:{1024:{horizontalGap:5,verticalGap:5,columns:4},768:{horizontalGap:1,verticalGap:1,columns:2}}}}},{key:"initGalleriesTypes",value:function(){this.galleriesTypes={grid:g,justified:m,masonry:p}}},{key:"createGallery",value:function(){var t=jQuery.extend(!0,this.getDefaultSettings(),this.userSettings),e=this.galleriesTypes[t.type];this.galleryHandler=new e(t)}},{key:"setSettings",value:function(t,e){this.galleryHandler.setSettings(t,e)}},{key:"destroy",value:function(){this.galleryHandler.destroy()}}]),t}()}]).default;